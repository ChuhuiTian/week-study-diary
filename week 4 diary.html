<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.550">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Chuhui Tian">
<meta name="dcterms.date" content="2025-02-22">

<title>Weekly Study diary - 6&nbsp; week 4 study diary</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./week 5 diary.html" rel="next">
<link href="./week 3 diary.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./week 4 diary.html"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">week 4 study diary</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Weekly Study diary</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">My Learning Diary Book</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week 1 diary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">week 1 diary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week 2 diary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">week 2 diary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week 3 diary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">week 3 study diary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week 4 diary.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">week 4 study diary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week 5 diary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">week 5 study diary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week 6 diary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">week 6 diary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week 7 diary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">week 7 diary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./week 8 diary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">week 8 diary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">References</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#city-case-study-integrating-remote-sensing-data-and-policy-implementation-in-shanghai" id="toc-city-case-study-integrating-remote-sensing-data-and-policy-implementation-in-shanghai" class="nav-link active" data-scroll-target="#city-case-study-integrating-remote-sensing-data-and-policy-implementation-in-shanghai"><span class="header-section-number">7</span> City Case Study: Integrating Remote Sensing Data and Policy Implementation in Shanghai</a>
  <ul class="collapse">
  <li><a href="#abstract" id="toc-abstract" class="nav-link" data-scroll-target="#abstract"><span class="header-section-number">7.1</span> 1. Abstract</a></li>
  <li><a href="#application-leveraging-remote-sensing-data-to-fulfill-policy-objectives" id="toc-application-leveraging-remote-sensing-data-to-fulfill-policy-objectives" class="nav-link" data-scroll-target="#application-leveraging-remote-sensing-data-to-fulfill-policy-objectives"><span class="header-section-number">7.2</span> 2. Application: Leveraging Remote Sensing Data to Fulfill Policy Objectives</a>
  <ul class="collapse">
  <li><a href="#data-acquisition-and-advanced-pre-processing" id="toc-data-acquisition-and-advanced-pre-processing" class="nav-link" data-scroll-target="#data-acquisition-and-advanced-pre-processing"><span class="header-section-number">7.2.1</span> 2.1 Data Acquisition and Advanced Pre-processing</a></li>
  <li><a href="#case-applications-in-shanghai" id="toc-case-applications-in-shanghai" class="nav-link" data-scroll-target="#case-applications-in-shanghai"><span class="header-section-number">7.2.2</span> 2.2 Case Applications in Shanghai</a></li>
  <li><a href="#policy-alignment-and-impact" id="toc-policy-alignment-and-impact" class="nav-link" data-scroll-target="#policy-alignment-and-impact"><span class="header-section-number">7.2.3</span> 2.3 Policy Alignment and Impact</a></li>
  </ul></li>
  <li><a href="#reflection-integrating-policy-urban-dynamics-and-data-driven-insights" id="toc-reflection-integrating-policy-urban-dynamics-and-data-driven-insights" class="nav-link" data-scroll-target="#reflection-integrating-policy-urban-dynamics-and-data-driven-insights"><span class="header-section-number">7.3</span> 3. Reflection: Integrating Policy, Urban Dynamics, and Data-Driven Insights</a>
  <ul class="collapse">
  <li><a href="#knowledge-acquisition-and-insights" id="toc-knowledge-acquisition-and-insights" class="nav-link" data-scroll-target="#knowledge-acquisition-and-insights"><span class="header-section-number">7.3.1</span> 3.1 Knowledge Acquisition and Insights</a></li>
  <li><a href="#future-directions-and-recommendations" id="toc-future-directions-and-recommendations" class="nav-link" data-scroll-target="#future-directions-and-recommendations"><span class="header-section-number">7.3.2</span> 3.2 Future Directions and Recommendations</a></li>
  </ul></li>
  <li><a href="#reference-list" id="toc-reference-list" class="nav-link" data-scroll-target="#reference-list"><span class="header-section-number">7.4</span> Reference List</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">week 4 study diary</span></h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Chuhui Tian </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">February 22, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="city-case-study-integrating-remote-sensing-data-and-policy-implementation-in-shanghai" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> City Case Study: Integrating Remote Sensing Data and Policy Implementation in Shanghai</h1>
<p>This document presents a comprehensive case study on Shanghai, focusing on how remote sensing data can be strategically applied to meet policy objectives. It delves into the interplay between national and local policies, the technical methodologies used to process remote sensing imagery, and the broader implications for urban management and sustainable development.</p>
<hr>
<section id="abstract" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="abstract"><span class="header-section-number">7.1</span> 1. Abstract</h2>
<p>Shanghai, a global megacity at the forefront of urbanization, faces multifaceted challenges including environmental degradation, rapid land use change, and disaster vulnerability. In response, both central and local governments have formulated rigorous policies such as the <em>“Regulations on the Application of Remote Sensing Satellites in China”</em> and the <em>“Shanghai Urban Planning Management Regulations”</em>.</p>
<p>This study provides a dual-focused abstract:<br>
- <strong>Policy Overview:</strong> A critical summary of the aforementioned regulations, emphasizing mandates for data openness, stringent quality control, and the integration of remote sensing technology in public decision-making.<br>
- <strong>City Profile:</strong> An analysis of Shanghai’s current urban dynamics—ranging from environmental monitoring needs to infrastructure planning and emergency response strategies.</p>
<p>Through advanced pre-processing and analysis of multispectral satellite imagery, this case study illustrates how remote sensing data underpins policy objectives and supports sustainable urban development in Shanghai.</p>
<hr>
</section>
<section id="application-leveraging-remote-sensing-data-to-fulfill-policy-objectives" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="application-leveraging-remote-sensing-data-to-fulfill-policy-objectives"><span class="header-section-number">7.2</span> 2. Application: Leveraging Remote Sensing Data to Fulfill Policy Objectives</h2>
<section id="data-acquisition-and-advanced-pre-processing" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="data-acquisition-and-advanced-pre-processing"><span class="header-section-number">7.2.1</span> 2.1 Data Acquisition and Advanced Pre-processing</h3>
<p>To align with policy imperatives, a robust remote sensing workflow was established:<br>
- <strong>Data Sources:</strong><br>
- Open-access datasets from the Sentinel and Landsat missions, ensuring high temporal and spatial resolution.<br>
- Supplementary datasets from the National Remote Sensing Center to enrich the analysis.<br>
- <strong>Pre-processing Steps:</strong><br>
- <strong>Atmospheric Correction:</strong> Implementing the Dark Object Subtraction (DOS) method to remove atmospheric scattering. For example, by calculating the 1% reflectance threshold from the darkest pixel, we obtain a corrected image that is closer to true surface reflectance.<br>
- <strong>Geometric Correction and Mosaicking:</strong> Multiple image tiles are geometrically corrected and mosaicked to create a seamless composite of the urban region.<br>
- <strong>Clipping and Masking:</strong> The composite image is then clipped using a high-precision shapefile of Shanghai’s administrative boundaries to ensure a focused analysis.</p>
</section>
<section id="case-applications-in-shanghai" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2" class="anchored" data-anchor-id="case-applications-in-shanghai"><span class="header-section-number">7.2.2</span> 2.2 Case Applications in Shanghai</h3>
<p>A. Environmental Monitoring and Urban Heat Island Analysis Objective: Monitor urban vegetation and quantify the urban heat island (UHI) effect, crucial for environmental protection and public health.</p>
<p>Method:</p>
<p>Calculate NDVI to assess the health and distribution of urban green spaces.</p>
<p>Analyze thermal infrared data to map surface temperature variations.</p>
<p>Perform time-series analysis to detect trends and anomalies.</p>
<p>Outcomes: The resulting data provide a scientific basis for urban greening initiatives and pollution control measures, directly supporting the policy goal of sustainable environmental management.</p>
<p>B. Urban Planning and Land Use Change Objective: Inform urban planning by identifying patterns of land use change and urban sprawl.</p>
<p>Method:</p>
<p>Use supervised classification techniques to differentiate between residential, commercial, industrial, and green areas.</p>
<p>Incorporate change detection algorithms to monitor the evolution of the urban landscape over time.</p>
<p>Outcomes: The classified land use maps and change detection results assist city planners in developing targeted policies for urban renewal and sustainable infrastructure development.</p>
<p>C. Disaster Management and Emergency Response Objective: Enhance preparedness and response for natural disasters such as typhoons and flooding.</p>
<p>Method:</p>
<p>Utilize near real-time satellite imagery to track weather patterns and rapidly update hazard maps.</p>
<p>Integrate remote sensing data with GIS-based emergency response systems.</p>
<p>Outcomes: This integration improves early warning systems and guides effective emergency response strategies, minimizing risk to life and property.</p>
</section>
<section id="policy-alignment-and-impact" class="level3" data-number="7.2.3">
<h3 data-number="7.2.3" class="anchored" data-anchor-id="policy-alignment-and-impact"><span class="header-section-number">7.2.3</span> 2.3 Policy Alignment and Impact</h3>
<p>The applications described above are directly aligned with the objectives outlined in both national and local policies. For instance:</p>
<p>The “Regulations on the Application of Remote Sensing Satellites in China” emphasize data accuracy, timeliness, and transparency.</p>
<p>The “Shanghai Urban Planning Management Regulations” require up-to-date, scientifically validated data to inform zoning, land use, and disaster management decisions.</p>
<p>Remote sensing technology thus becomes a critical enabler, ensuring that policy measures are based on reliable, real-time data and are adaptable to the dynamic urban environment.</p>
</section>
</section>
<section id="reflection-integrating-policy-urban-dynamics-and-data-driven-insights" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="reflection-integrating-policy-urban-dynamics-and-data-driven-insights"><span class="header-section-number">7.3</span> 3. Reflection: Integrating Policy, Urban Dynamics, and Data-Driven Insights</h2>
<section id="knowledge-acquisition-and-insights" class="level3" data-number="7.3.1">
<h3 data-number="7.3.1" class="anchored" data-anchor-id="knowledge-acquisition-and-insights"><span class="header-section-number">7.3.1</span> 3.1 Knowledge Acquisition and Insights</h3>
<p>Policy Integration: The study deepened my understanding of how rigorous policy frameworks can drive the adoption of advanced remote sensing techniques. I learned that policies are not merely regulatory documents but serve as strategic roadmaps that facilitate technological innovation.</p>
<p>Technical Mastery: The hands-on processing of multisource satellite data—ranging from atmospheric correction to land use classification—has significantly enhanced my technical skills. This practical experience underscores the transformative potential of remote sensing in urban management.</p>
<p>Urban Challenges: By focusing on Shanghai, I observed firsthand the challenges posed by rapid urbanization: environmental degradation, loss of green space, and increasing vulnerability to natural disasters. These challenges necessitate a holistic approach that combines cutting-edge technology with sound policy.</p>
</section>
<section id="future-directions-and-recommendations" class="level3" data-number="7.3.2">
<h3 data-number="7.3.2" class="anchored" data-anchor-id="future-directions-and-recommendations"><span class="header-section-number">7.3.2</span> 3.2 Future Directions and Recommendations</h3>
<p>Technological Advancements: Emerging trends in AI and big data analytics promise to further refine remote sensing applications, making them more predictive and actionable. I plan to explore these avenues to enhance urban monitoring and disaster response systems.</p>
<p>Policy Evolution: Continuous collaboration between policymakers, technologists, and urban planners is essential. Policies must evolve to accommodate new technologies while ensuring data security, privacy, and equitable access.</p>
<p>Cross-disciplinary Integration: The successful implementation of remote sensing applications in urban contexts requires an integrated approach that combines insights from environmental science, urban planning, and information technology. Establishing a robust feedback mechanism between these disciplines will be key to sustained progress.</p>
</section>
</section>
<section id="reference-list" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="reference-list"><span class="header-section-number">7.4</span> Reference List</h2>
<p>Jensen, J. R. (2015). Introductory Digital Image Processing: A Remote Sensing Perspective. Prentice Hall.</p>
<p>Schulte, H., &amp; colleagues. (2018). Better together: Integrating and fusing multispectral and radar satellite imagery to inform biodiversity monitoring, ecological research and conservation science. Methods in Ecology and Evolution, 9, 849–865. https://doi.org/10.1111/2041-210X.13025</p>
<p>Regulations on the Application of Remote Sensing Satellites in China. (n.d.). Retrieved from National Remote Sensing Center Website (Note: Update the URL and publication year if available.)</p>
<p>Shanghai Urban Planning Management Regulations. (n.d.). Retrieved from Shanghai Municipal Government Website (Note: Update the URL and publication year if available.)</p>
<p>European Space Agency. (n.d.). Sentinel missions. Retrieved from https://www.esa.int/Our_Activities/Observing_the_Earth/Sentinel-1</p>
<p>United States Geological Survey. (n.d.). Landsat Satellite Imagery. Retrieved from https://landsat.usgs.gov</p>
<p>National Remote Sensing Center. (n.d.). Retrieved from http://www.nrscc.gov.cn</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./week 3 diary.html" class="pagination-link" aria-label="week 3 study diary">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">week 3 study diary</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./week 5 diary.html" class="pagination-link" aria-label="week 5 study diary">
        <span class="nav-page-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">week 5 study diary</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>